---
title: 《图解http》第二章
date: 2020-11-1
tags:
 - HTTP
categories:
 -  图解http
---

# 第二章 简单的 HTTP 协议

#### HTTP 协议用户客户端和服务端之间的通讯
在第一章中已经说过，客户端和服务端的区别，请求的一般是客户端，提供资源的一般是服务端，

如下图：

![客户端和服务端](http://localhost:2002/2.1.png "客户端和服务端")

HTTP协议，在客户端和服务端，应用的时候 会有一些通用的请求格式，

本文都是以HTTP 1.1 为标准的，

发送请求时会有
客户端
GET / HTTP /1.1
Host: www.baidu.com

服务端：

HTTP/1.1 200 OK
Date: Tue, 10 Jul 2013 06:50:15
Content-length: 36
相应主体 html

这些前端或者其他的web相关 应当知道，请求方法， HTTP 版本号，都是顾名思义的。

#### 无状态的HTTP
HTTP 是一个底层简单的协议不会牵扯到具体的业务层面，而且那个年代也不会需要，保存客户端和服务端的状态，有好有坏。当HTTP 请求数多时，无状态 显示是能够提高性能的，不用管处理完的HTTP.

所以有后来的Cookie 机制， 和 token 机制。

#### 请求 URI 定位资源

看到这里，我有点疑问的，是我们一般都成为URL, 统一定位符，其实专业的应该叫URI,

URL表示具体的位置，其实也可以称为URI 说出去并无多大区别。

#### 告知服务器意图的HTTP 方法

###### GET方法：
`一般用来去服务端获取资源的方法，按照标准的请求，方便调试或者开发人员知道请求的具体用处。
`
###### POST: 传输实体主体

`POST方法用来传递方法，在前后端联调的时候，一般用来修改服务端的内容，如新增，修改，删除等，虽然删除有删除的方法，但是现在大多用get和post 即可。`

###### PUT: 传输文件

`PUT 一般用来上传文件，要求在请求报文的主体中包含文件内容，然后保存到请求的URL指定的地址， 由于HTTP1.1的PUT方法不带验证机制。任何人都可以上传图片，由于安全性，一般的网站都不用这个，现在大多数都用 POST.`

###### HEAD:获得报文首部

`一般我们去服务端请求都是 要请求资源，但是服务端会把响应的一些关键的参数，如相应内容，时间，缓存，语言，等等，这些不属于资源主体，的信息，我们如果只需要这些信息，可以通过HEAD 方式去获取。`

###### DELETE：删除文件

`DELETE方法用来删除文件，是与PUT相反的方法。DELETE方法按请求URI删除指定的资源。但是，HTTP/1.1的DELETE方法本身和PUT方法一样不带验证机制，所以一般的Web网站也不使用DELETE方法。当配合Web应用程序的验证机制，或遵守REST标准时还是有可能会开放使用的。`

###### OPTIONS：询问支持的方法

`OPTIONS方法用来查询针对请求URI指定的资源支持的方法。`

###### TRACE：追踪路径

`TRACE方法是让Web服务器端将之前的请求通信环回给客户端的方法。`

###### CONNECT：要求用隧道协议连接代理

CONNECT方法要求在与代理服务器通信时建立隧道，实现用隧道协议进行TCP通信。主要使用SSL（Secure Sockets Layer，安全套接层）和TLS（TransportLayer Security，传输层安全）协议把通信内容加密后经网络隧道传输。

这个协议有点像HTTPS 协议进行了加密再传输，但是本质上不同。


#### 持久连接节省通信量

我们在以前的web端 性能优化的时候 就有一种使用雪碧图来优化，通过css background-相关属性，去裁剪背景图显示部分，达到一图多用，节省http请求，那个时候，http没有持久链接，每次链接都需要三次握手和四次挥手，多次请求比较耗费性能，使用持久链接，减少TCP 握手和挥手的部分，提高性能。

#### 管线化

管线化我理解的就是 并发，多个请求一起发送，不用等前一个请求回来之后再发下一个，现在的某些浏览器还有限制，并发数 只有6个还是 几个的，
一起并发，那么通讯的时间就是 最长的那个，而不是累计一起的。

#### 使用Cookie的状态管理

由于HTTP 协议没有状态，那么在用户登录状态下，无法记住，就会造成重复登录的问题，新增的cookie 就是为了给服务端和客户端记住用户信息的，

场景：
用户第一次登录请求时不携带cookie 将用户名和密码 传给服务端，服务端校验，响应头部中 有一个set-cookie 头部，那么浏览器就知道，在下次发送请求的时候自动把 cookie 带过去，cookie 中携带了 一些用户信息和cookie有效期。

如下图 响应头部:

![响应头部](http://localhost:2002/2.2.png "响应头部")

如下图 再次请求头部:

![响应头部](http://localhost:2002/2.3.png "响应头部")


